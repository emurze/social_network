<script defer>
    function setRepliesButtons(
        {forms, post_id_set, content_inputs, url}
    ) {
        console.log(forms)
        const csrf_token_input = document.querySelector("input[name='csrfmiddlewaretoken']")
        const csrf_token = csrf_token_input ? csrf_token_input.value : null
        const zip = (...rows) => [...rows[0]].map((_, c) => rows.map(row => row[c]))

        zip(forms, post_id_set, content_inputs).forEach(
            ([form, post_id, content_input]) => {
                form.onsubmit = (e) => {
                    e.preventDefault()
                    const form = new FormData()
                    form.append('post_id', post_id.innerHTML)
                    form.append('content', content_input.value)

                    const headers = {
                        'X-CSRFToken': csrf_token,
                        'Content-Type': `multipart/form-data;
                         boundary=${form._boundary}`,
                    }

                    async function send_post() {
                        const response = await axios.post(url, form, {headers})

                        console.log(response)
                    }
                    send_post()
                }
            }
        )
    }
    setRepliesButtons({
        forms: document.querySelectorAll('.post__replies-footer-form'),
        post_id_set: document.querySelectorAll('.like__button-post_id'),
        content_inputs: document.querySelectorAll('input[id="id_content"]'),
        url: "{% url 'post:reply_list' %}",
    })
</script>
<script defer>
    const replies__set_all = document.querySelectorAll('.post__replies-list-all')
    const replies_first_set = document.querySelectorAll('.reply__item--first')
    const replies_show_more_set = document.querySelectorAll('.post__replies-show_more')
    const zip = (...rows) => [...rows[0]].map((_, c) => rows.map(row => row[c]))

    zip(replies__set_all, replies_first_set, replies_show_more_set).forEach(
        ([replies_set, reply_first, show_more]) => {
            show_more.onclick = () => {
                reply_first.classList.remove('reply__item--first')
                replies_set.classList.remove('no_display')
                show_more.remove()
            }
        }
    )
</script>