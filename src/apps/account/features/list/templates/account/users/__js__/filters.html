<script defer>
    const filters_form = document.forms.filters_form

    filters_form.onsubmit = (e) => {
        e.preventDefault()

        function get_multi_query_strings(input_set, name) {
            return input_set.filter(checkout => checkout.checked)
                            .map(checkout => `${name}=${checkout.value}`)
                            .join('&')
        }

        const gender_input_set = Array.from(filters_form.gender)
        const age_input_set = Array.from(filters_form.age)

        const gender_set = get_multi_query_strings(gender_input_set, 'gender')
        const age_set = get_multi_query_strings(age_input_set, 'age')

        const data = [gender_set, age_set].join('&')

        async function _() {
            const url = `{% url 'account:search_users' %}`
            const response = await axios.get(
                `${url}?${data}`
            )

            gender_input_set && gender_input_set.map(input => input.checked = false)
            age_input_set && age_input_set.map(input => input.checked = false)
        }_()
    }
</script>